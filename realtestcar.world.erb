<?xml version="1.0" ?>
<%

  # asphalt plane
  asphalt_positions = [-455, -355, -255, -155, -55, 55, 155, 255, 355, 455]
  lane_divider_x_positions = [-405, -305, -205, -105, -5, 5, 105, 205, 305, 405]
  big_lane_divider_positions = [0]
  lane_divider_y_positions = []
  y = -499
  skip = -410
  while y < -11
    while y < skip
        lane_divider_y_positions << y
        y = y + 4
    end
    y = y + 8
    skip = skip + 100
  end

  y = 499
  skip = 410
  while y > 11
      while y > skip
          lane_divider_y_positions << y
          y = y - 4
      end
      y = y - 8
      skip = skip - 100
  end

%>

<sdf version="1.5">
  <world name="default">
    <gui>
      <camera name="user_camera">
        <pose>7 -3 2.5 0 0.27 2.35</pose>
      </camera>
    </gui>
    <include>
       <uri>models/ground_plane</uri>
    </include>
    <include>
       <uri>models/lane_divider</uri>
    </include>
    <include>
      <uri>model://sun</uri>
    </include>
    <include>
       <pose>5 5 100 0 0 0</pose>
       <uri>models/utility_cart</uri>
    </include>

<%   # Asphalt Planes
   x = -1
   y = 0
   while y < 10
      x = x + 1
      if x == 10
         if y == 9
            break
         end
         x = 0
         y = y + 1
      end
      name = 'asphalt_plane_' + x.to_s + '_' + y.to_s
%>

  <%="<model name='#{name}'>" %>
    <pose><%= asphalt_positions[x]%> <%= asphalt_positions[y]%> 0 0 0 0</pose>
    <static>true</static>
    <link name="link">
      <collision name="collision">
        <geometry>
          <box>
            <size>90 90 .1</size>
          </box>
        </geometry>
      </collision>
      <visual name="visual">
        <cast_shadows>false</cast_shadows>
        <geometry>
          <box>
            <size>90 90 .1</size>
          </box>
        </geometry>
        <material>
          <script>
            <uri>models/asphalt_plane/materials/scripts</uri>
            <uri>models/asphalt_plane/materials/textures</uri>
            <name>vrc/asphalt</name>
          </script>
        </material>
      </visual>
    </link>
  </model>
<%  end %>


<%   #Lane Dividers
    x = 0
    y = -1
    while x < 10
        y = y + 1
        if y == 230
            if x == 2
                break
            end
            y = 0
            x = x +1
        end
        name = 'lane_divider_' + x.to_s + '_' + y.to_s
%>

    <%="<model name='#{name}'>" %>
        <pose> <%=lane_divider_x_positions[x]%> <%=lane_divider_y_positions[y]%> 0 0 0 0</pose>
        <static>true</static>
        <link name="link">
        <collision name="collision">
            <geometry>
                <box>
                    <size>.25 2 .025</size>
                </box>
                </geometry>
            </collision>
            <visual name="visual">
                <cast_shadows>false</cast_shadows>
                <geometry>
                    <box>
                        <size>.25 2 .025</size>
                    </box>
                </geometry>
            </visual>
        </link>
    </model>
<%  end %>


  </world>
</sdf>
